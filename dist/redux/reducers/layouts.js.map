{"version":3,"sources":["../../../src/redux/reducers/layouts.js"],"names":["_","require","normalize","module","exports","state","action","type","payload","component","componentWrapperPath","plugin","name","console","log","error","JSON","stringify","Error","pluginCreator___NODE","index","findIndex","l","id","slice","concat","filter"],"mappings":";;AAAA,MAAMA,IAAIC,QAAS,QAAT,CAAV;AACA,MAAMC,YAAYD,QAAS,gBAAT,CAAlB;;AAEAE,OAAOC,OAAP,GAAiB,CAACC,QAAQ,EAAT,EAAaC,MAAb,KAAwB;AACvC,UAAQA,OAAOC,IAAf;AACE,SAAM,cAAN;AACE,aAAO,EAAP;AACF,SAAM,eAAN;AACED,aAAOE,OAAP,CAAeC,SAAf,GAA2BP,UAAUI,OAAOE,OAAP,CAAeC,SAAzB,CAA3B;AACAH,aAAOE,OAAP,CAAeE,oBAAf,GAAsCR,UACpCI,OAAOE,OAAP,CAAeE,oBADqB,CAAtC;AAGA,UAAI,CAACJ,OAAOK,MAAR,IAAkB,CAACL,OAAOK,MAAP,CAAcC,IAArC,EAA2C;AACzCC,gBAAQC,GAAR,CAAa,EAAb;AACAD,gBAAQE,KAAR,CAAcC,KAAKC,SAAL,CAAeX,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAAd;AACAO,gBAAQC,GAAR,CAAa,EAAb;AACA,cAAM,IAAII,KAAJ,CACH;iCADG,CAAN;AAID;AACDZ,aAAOE,OAAP,CAAeW,oBAAf,GAAuC,UAASb,OAAOK,MAAP,CAAcC,IAAK,EAAnE;AACA,YAAMQ,QAAQpB,EAAEqB,SAAF,CAAYhB,KAAZ,EAAmBiB,KAAKA,EAAEC,EAAF,KAASjB,OAAOE,OAAP,CAAee,EAAhD,CAAd;AACA;AACA;AACA,UAAIH,UAAU,CAAC,CAAf,EAAkB;AAChB,eAAO,CACL,GAAGf,MACAmB,KADA,CACM,CADN,EACSJ,KADT,EAEAK,MAFA,CAEOnB,OAAOE,OAFd,EAGAiB,MAHA,CAGOpB,MAAMmB,KAAN,CAAYJ,QAAQ,CAApB,CAHP,CADE,CAAP;AAMD,OAPD,MAOO;AACL,eAAO,CAAC,GAAGf,MAAMoB,MAAN,CAAanB,OAAOE,OAApB,CAAJ,CAAP;AACD;AACH,SAAM,eAAN;AACE,aAAOH,MAAMqB,MAAN,CAAaJ,KAAKA,EAAEC,EAAF,KAASjB,OAAOE,OAAP,CAAee,EAA1C,CAAP;AACF;AACE,aAAOlB,KAAP;AAlCJ;AAoCD,CArCD","file":"layouts.js","sourcesContent":["const _ = require(`lodash`)\nconst normalize = require(`normalize-path`)\n\nmodule.exports = (state = [], action) => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return []\n    case `CREATE_LAYOUT`:\n      action.payload.component = normalize(action.payload.component)\n      action.payload.componentWrapperPath = normalize(\n        action.payload.componentWrapperPath\n      )\n      if (!action.plugin && !action.plugin.name) {\n        console.log(``)\n        console.error(JSON.stringify(action, null, 4))\n        console.log(``)\n        throw new Error(\n          `Pages can only be created by plugins. There wasn't a plugin set\n        when creating this page.`\n        )\n      }\n      action.payload.pluginCreator___NODE = `Plugin ${action.plugin.name}`\n      const index = _.findIndex(state, l => l.id === action.payload.id)\n      // If the id already exists, overwrite it.\n      // Otherwise, add it to the end.\n      if (index !== -1) {\n        return [\n          ...state\n            .slice(0, index)\n            .concat(action.payload)\n            .concat(state.slice(index + 1)),\n        ]\n      } else {\n        return [...state.concat(action.payload)]\n      }\n    case `DELETE_LAYOUT`:\n      return state.filter(l => l.id !== action.payload.id)\n    default:\n      return state\n  }\n}\n"]}