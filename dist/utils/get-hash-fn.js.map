{"version":3,"sources":["../../src/utils/get-hash-fn.js"],"names":["createHash","require","getHashFn","hashFunction","hashDigest","hashDigestBits","cache","Set","input","hash","update","digest","partialDigest","substr","output","parseInt","has","Error","add","module","exports"],"mappings":";;AAAA,MAAMA,aAAaC,QAAS,QAAT,EAAkBD,UAArC;;AAEA,MAAME,YAAY,CAAC;AACjBC,iBAAgB,KADC;AAEjBC,eAAc,KAFG;AAGjBC,mBAAiB,EAHA;AAIjBC,UAAQ,IAAIC,GAAJ;AAJS,CAAD,KAKZC,SAAS;AACb,QAAMC,OAAOT,WAAWG,YAAX,CAAb;AACAM,OAAKC,MAAL,CAAYF,KAAZ;AACA,QAAMG,SAASF,KAAKE,MAAL,CAAYP,UAAZ,CAAf;AACA,QAAMQ,gBAAgBD,OAAOE,MAAP,CAAc,CAAd,EAAiBR,iBAAiB,CAAlC,CAAtB;AACA,QAAMS,SAASC,SAASH,aAAT,EAAwB,EAAxB,CAAf;AACA;AACA,MAAIN,MAAMU,GAAN,CAAUF,MAAV,CAAJ,EAAuB;AACrB,UAAMG,MAAO,uBAAsBT,KAAM,OAAMM,MAAO,EAAhD,CAAN;AACD;AACDR,QAAMY,GAAN,CAAUJ,MAAV;AACA,SAAOA,MAAP;AACD,CAjBD;;AAmBAK,OAAOC,OAAP,GAAiBlB,SAAjB","file":"get-hash-fn.js","sourcesContent":["const createHash = require(`crypto`).createHash\n\nconst getHashFn = ({\n  hashFunction = `md5`,\n  hashDigest = `hex`,\n  hashDigestBits = 48,\n  cache = new Set(),\n}) => input => {\n  const hash = createHash(hashFunction)\n  hash.update(input)\n  const digest = hash.digest(hashDigest)\n  const partialDigest = digest.substr(0, hashDigestBits / 4)\n  const output = parseInt(partialDigest, 16)\n  // guard against collisions\n  if (cache.has(output)) {\n    throw Error(`Hash collision at f(${input}) = ${output}`)\n  }\n  cache.add(output)\n  return output\n}\n\nmodule.exports = getHashFn\n"]}