{"version":3,"sources":["../../src/utils/webpack.config.js"],"names":["store","require","debug","WebpackMD5Hash","ChunkManifestPlugin","GatsbyModulePlugin","genBabelConfig","withBasePath","HashedChunkIdsPlugin","module","exports","program","directory","suppliedStage","webpackPort","pages","babelStage","directoryPath","stage","babelConfig","processEnv","defaultNodeEnv","env","process","NODE_ENV","envFile","join","cwd","parsed","parse","readFileSync","encoding","e","code","console","log","envObject","Object","keys","reduce","acc","key","JSON","stringify","gatsbyVarObject","match","PUBLIC_DIR","assign","output","path","filename","publicPath","host","prefixPaths","getState","config","pathPrefix","libraryTarget","chunkFilename","Error","entry","commons","resolve","main","app","plugins","optimize","OccurenceOrderPlugin","HotModuleReplacementPlugin","NoErrorsPlugin","DefinePlugin","__PREFIX_PATHS__","__PATH_PREFIX__","__POLYFILL__","polyfill","NamedModulesPlugin","clearConsole","compilationSuccessInfo","messages","port","paths","allChunks","components","map","page","componentChunkName","IgnorePlugin","CommonsChunkPlugin","name","chunks","minChunks","count","vendorModuleList","isFramework","vendor","regex","RegExp","test","resource","manifestVariable","UglifyJsPlugin","compress","screw_ie8","warnings","mangle","comments","extensions","modulesDirectories","devtool","loader","exclude","query","loaders","limit","merge","postcss","wp","addDependencyTo","browsers","browserslist","extract","resolveLoader","root","userLoaderDirectoryPath","statSync","isDirectory","push","__dirname","context","node","__filename","target","profile","validatedConfig"],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;AAIA;;;;;;AAEA,MAAM,EAAEA,KAAF,KAAYC,QAAS,UAAT,CAAlB;;AAJA;AACA;;AAIA,MAAMC,QAAQD,QAAS,OAAT,EAAkB,uBAAlB,CAAd;AACA,MAAME,iBAAiBF,QAAS,kBAAT,CAAvB;AACA,MAAMG,sBAAsBH,QAAS,+BAAT,CAA5B;AACA,MAAMI,qBAAqBJ,QAAS,6BAAT,CAA3B;AACA,MAAMK,iBAAiBL,QAAS,gBAAT,CAAvB;AACA,MAAM,EAAEM,YAAF,KAAmBN,QAAS,QAAT,CAAzB;AACA,MAAMO,uBAAuBP,QAAS,2BAAT,CAA7B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEAQ,OAAOC,OAAP,GAAiB,OACfC,OADe,EAEfC,SAFe,EAGfC,aAHe,EAIfC,cAAc,IAJC,EAKfC,QAAQ,EALO,KAMZ;AACH,QAAMC,aAAaH,aAAnB;AACA,QAAMI,gBAAgBV,aAAaK,SAAb,CAAtB;;AAEA;AACA;AACA,QAAMM,QAAQL,aAAd;AACA,QAAMM,cAAc,MAAMb,eAAeK,OAAf,EAAwBK,UAAxB,CAA1B;;AAEA,WAASI,UAAT,CAAoBF,KAApB,EAA2BG,cAA3B,EAA2C;AACzCnB,UAAO,qBAAoBgB,KAAM,GAAjC;AACA,UAAMI,MAAMC,QAAQD,GAAR,CAAYE,QAAZ,GACRD,QAAQD,GAAR,CAAYE,QADJ,GAEP,GAAEH,cAAe,EAFtB;AAGA,UAAMI,UAAU,eAAKC,IAAL,CAAUH,QAAQI,GAAR,EAAV,EAA0B,UAASL,GAAI,EAAvC,CAAhB;AACA,QAAIM,SAAS,EAAb;AACA,QAAI;AACFA,eAAS,iBAAOC,KAAP,CAAa,aAAGC,YAAH,CAAgBL,OAAhB,EAAyB,EAAEM,UAAW,MAAb,EAAzB,CAAb,CAAT;AACD,KAFD,CAEE,OAAOC,CAAP,EAAU;AACV,UAAIA,KAAKA,EAAEC,IAAF,KAAY,QAArB,EAA8B;AAC5BC,gBAAQC,GAAR,CAAYH,CAAZ;AACD;AACF;AACD,UAAMI,YAAYC,OAAOC,IAAP,CAAYV,MAAZ,EAAoBW,MAApB,CAA2B,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzDD,UAAIC,GAAJ,IAAWC,KAAKC,SAAL,CAAef,OAAOa,GAAP,CAAf,CAAX;AACA,aAAOD,GAAP;AACD,KAHiB,EAGf,EAHe,CAAlB;;AAKA,UAAMI,kBAAkBP,OAAOC,IAAP,CAAYf,QAAQD,GAApB,EAAyBiB,MAAzB,CAAgC,CAACC,GAAD,EAAMC,GAAN,KAAc;AACpE,UAAIA,IAAII,KAAJ,CAAU,UAAV,CAAJ,EAA2B;AACzBL,YAAIC,GAAJ,IAAWC,KAAKC,SAAL,CAAepB,QAAQD,GAAR,CAAYmB,GAAZ,CAAf,CAAX;AACD;AACD,aAAOD,GAAP;AACD,KALuB,EAKrB,EALqB,CAAxB;;AAOA;AACAJ,cAAUZ,QAAV,GAAqBkB,KAAKC,SAAL,CAAerB,GAAf,CAArB;AACAc,cAAUU,UAAV,GAAuBJ,KAAKC,SAAL,CAAgB,GAAEpB,QAAQI,GAAR,EAAc,SAAhC,CAAvB;;AAEA,WAAOU,OAAOU,MAAP,CAAcX,SAAd,EAAyBQ,eAAzB,CAAP;AACD;;AAED1C,QAAO,qCAAoCgB,KAAM,GAAjD;AACA,WAAS8B,MAAT,GAAkB;AAChB,YAAQ9B,KAAR;AACE,WAAM,SAAN;AACE,eAAO;AACL+B,gBAAMrC,SADD;AAELsC,oBAAW,WAFN;AAGLC,sBAAa,UAASxC,QAAQyC,IAAK,IAAGtC,WAAY;AAH7C,SAAP;AAKF,WAAM,WAAN;AACE;AACA;AACA,eAAO;AACLmC,gBAAMhC,cAAe,QAAf,CADD;AAELiC,oBAAW,mBAFN;AAGLC,sBAAYxC,QAAQ0C,WAAR,GACP,GAAErD,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAW,GAD9B,GAEP;AALA,SAAP;AAOF,WAAM,YAAN;AACA,WAAM,cAAN;AACE;AACA;AACA,eAAO;AACLP,gBAAMhC,cAAe,QAAf,CADD;AAELiC,oBAAW,gBAFN;AAGLO,yBAAgB,KAHX;AAILN,sBAAYxC,QAAQ0C,WAAR,GACP,GAAErD,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAW,GAD9B,GAEP;AANA,SAAP;AAQF,WAAM,kBAAN;AACE,eAAO;AACLN,oBAAW,uBADN;AAELQ,yBAAgB,uBAFX;AAGLT,gBAAMhC,cAAe,QAAf,CAHD;AAILkC,sBAAYxC,QAAQ0C,WAAR,GACP,GAAErD,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAW,GAD9B,GAEP;AANA,SAAP;AAQF;AACE,cAAM,IAAIG,KAAJ,CAAW,uBAAsBzC,KAAM,iBAAvC,CAAN;AAvCJ;AAyCD;;AAED,WAAS0C,KAAT,GAAiB;AACf,YAAQ1C,KAAR;AACE,WAAM,SAAN;AACE,eAAO;AACL2C,mBAAS,CACP5D,QAAQ6D,OAAR,CAAiB,wBAAjB,CADO,EAEN,GAAE7D,QAAQ6D,OAAR,CACA,+BADA,CAED,gBAAenD,QAAQyC,IAAK,IAAGtC,WAAY,4BAJtC,EAKPG,cAAe,YAAf,CALO;AADJ,SAAP;AASF,WAAM,cAAN;AACE,eAAO;AACL8C,gBAAM9C,cAAe,6BAAf;AADD,SAAP;AAGF,WAAM,WAAN;AACE,eAAO;AACL8C,gBAAM9C,cAAe,YAAf;AADD,SAAP;AAGF,WAAM,YAAN;AACE,eAAO;AACL8C,gBAAM9C,cAAe,qBAAf;AADD,SAAP;AAGF,WAAM,kBAAN;AACE,eAAO;AACL+C,eAAK/C,cAAe,uBAAf;AADA,SAAP;AAGF;AACE,cAAM,IAAI0C,KAAJ,CAAW,uBAAsBzC,KAAM,iBAAvC,CAAN;AA5BJ;AA8BD;;AAED,WAAS+C,OAAT,GAAmB;AACjB,YAAQ/C,KAAR;AACE,WAAM,SAAN;AACE,eAAO,CACL,IAAI,kBAAQgD,QAAR,CAAiBC,oBAArB,EADK,EAEL,IAAI,kBAAQC,0BAAZ,EAFK,EAGL,IAAI,kBAAQC,cAAZ,EAHK,EAIL,IAAI,kBAAQC,YAAZ,CAAyB;AACvB,yBAAelD,WAAWF,KAAX,EAAmB,aAAnB,CADQ;AAEvBqD,4BAAkB5D,QAAQ0C,WAFH;AAGvBmB,2BAAiB9B,KAAKC,SAAL,CAAe3C,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAvC,CAHM;AAIvBiB,wBAAczE,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBmB;AAJf,SAAzB,CAJK;AAUL;AACA;AACA;AACA;AACA,YAAI,kBAAQC,kBAAZ,EAdK,EAeL,0CAAgC;AAC9BC,wBAAc,KADgB;AAE9BC,kCAAwB;AACtBC,sBAAU,CACP,4CAA2CnE,QAAQoE,IAAK,EADjD,EAEP,wDAAuDpE,QAAQoE,IAAK,aAF7D;AADY;AAFM,SAAhC,CAfK,CAAP;AAyBF,WAAM,cAAN;AACE,eAAO,CACL,+CAA8B;AAC5BnB,iBAAQ,gBADoB;AAE5BoB,iBAAOjE;AAFqB,SAA9B,CADK,EAKL,IAAI,kBAAQuD,YAAZ,CAAyB;AACvB,yBAAelD,WAAWF,KAAX,EAAmB,aAAnB,CADQ;AAEvBqD,4BAAkB5D,QAAQ0C,WAFH;AAGvBmB,2BAAiB9B,KAAKC,SAAL,CAAe3C,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAvC,CAHM;AAIvBiB,wBAAczE,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBmB;AAJf,SAAzB,CALK,EAWL,uCAAuB,uBAAvB,CAXK,CAAP;AAaF,WAAM,WAAN;AACE,eAAO,CACL,IAAI,kBAAQJ,YAAZ,CAAyB;AACvB,yBAAelD,WAAWF,KAAX,EAAmB,YAAnB,CADQ;AAEvBqD,4BAAkB5D,QAAQ0C,WAFH;AAGvBmB,2BAAiB9B,KAAKC,SAAL,CAAe3C,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAvC,CAHM;AAIvBiB,wBAAczE,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBmB;AAJf,SAAzB,CADK,EAOL,uCAAuB,YAAvB,EAAoC,EAAEO,WAAW,IAAb,EAApC,CAPK,CAAP;AASF,WAAM,YAAN;AACE,eAAO,CACL,+CAA8B;AAC5BrB,iBAAQ,gBADoB;AAE5BoB,iBAAOjE;AAFqB,SAA9B,CADK,EAKL,IAAI,kBAAQuD,YAAZ,CAAyB;AACvB,yBAAelD,WAAWF,KAAX,EAAmB,YAAnB,CADQ;AAEvBqD,4BAAkB5D,QAAQ0C,WAFH;AAGvBmB,2BAAiB9B,KAAKC,SAAL,CAAe3C,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAvC,CAHM;AAIvBiB,wBAAczE,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBmB;AAJf,SAAzB,CALK,EAWL,uCAAuB,uBAAvB,EAA+C,EAAEO,WAAW,IAAb,EAA/C,CAXK,CAAP;AAaF,WAAM,kBAAN;AAAyB;AACvB;AACA,cAAIC,aAAalF,MACdsD,QADc,GAEdvC,KAFc,CAERoE,GAFQ,CAEJC,QAAQA,KAAKC,kBAFT,CAAjB;AAGAH,uBAAa,kBAAKA,UAAL,CAAb;AACA,iBAAO;AACL;AACA;AACA;AACA;AACA;AACA,cAAI,kBAAQI,YAAZ,CAAyB,cAAzB,EAAyC,SAAzC,CANK,EAOL,IAAInF,cAAJ,EAPK;AAQL;AACA;AACA;AACA,cAAI,kBAAQ+D,QAAR,CAAiBqB,kBAArB,CAAwC;AACtCC,kBAAO,SAD+B;AAEtCC,oBAAQ,CAAE,KAAF,EAAQ,GAAGP,UAAX,CAF8B;AAGtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAQ,uBAAW,CAACjF,MAAD,EAASkF,KAAT,KAAmB;AAC5B,oBAAMC,mBAAmB,CACtB,OADsB,EAEtB,WAFsB,EAGtB,MAHsB,EAItB,cAJsB,EAKtB,kBALsB,EAMtB,4BANsB,EAOtB,aAPsB,EAOR;AACd,8BARsB,EAStB,SATsB,EASZ;AACV,+BAVsB,EAWtB,SAXsB,EAYtB,kBAZsB,EAYH;AACnB,2BAbsB,EAaR;AACd,yBAdsB,EAcV;AACZ,uBAfsB,EAeZ;AACV,6BAhBsB,EAgBN;AAChB,uBAjBsB,EAiBZ;AACV,4BAlBsB,EAkBP;AACf,0BAnBsB,EAoBtB,aApBsB,CAAzB;AAsBA,oBAAMC,cAAc,kBAClBD,iBAAiBT,GAAjB,CAAqBW,UAAU;AAC7B,sBAAMC,QAAQ,IAAIC,MAAJ,CAAY,mBAAkBF,MAAO,MAArC,EAA6C,GAA7C,CAAd;AACA,uBAAOC,MAAME,IAAN,CAAWxF,OAAOyF,QAAlB,CAAP;AACD,eAHD,CADkB,CAApB;AAMA,qBAAOL,eAAeF,QAAQ,CAA9B;AACD;AA3CqC,WAAxC,CAXK;AAwDL;AACA;AACA;AACA,cAAI,kBAAQrB,YAAZ,CAAyB;AACvB,2BAAelD,WAAWF,KAAX,EAAmB,YAAnB,CADQ;AAEvBqD,8BAAkB5D,QAAQ0C,WAFH;AAGvBmB,6BAAiB9B,KAAKC,SAAL,CAAe3C,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBC,UAAvC,CAHM;AAIvBiB,0BAAczE,MAAMsD,QAAN,GAAiBC,MAAjB,CAAwBmB;AAJf,WAAzB,CA3DK;AAiEL;AACA,iDAAuB,qBAAvB,EAA6C,EAAEO,WAAW,IAAb,EAA7C,CAlEK;AAmEL;AACA;AACA,qDArEK;AAsEL;AACA;AACA;AACA,cAAI7E,mBAAJ,CAAwB;AACtB8C,sBAAW,qBADW;AAEtBiD,8BAAmB;AAFG,WAAxB,CAzEK;AA6EL;AACA,cAAI,kBAAQjC,QAAR,CAAiBkC,cAArB,CAAoC;AAClCC,sBAAU;AACRC,yBAAW,IADH,EACS;AACjBC,wBAAU;AAFF,aADwB;AAKlCC,oBAAQ;AACNF,yBAAW;AADL,aAL0B;AAQlCtD,oBAAQ;AACNyD,wBAAU,KADJ;AAENH,yBAAW;AAFL;AAR0B,WAApC,CA9EK;AA2FL;AACA,cAAI,kBAAQpC,QAAR,CAAiBC,oBAArB,EA5FK,EA6FL,IAAI9D,kBAAJ,EA7FK;AA8FL;AACA,cAAI,kBAAQsE,kBAAZ,EA/FK,EAgGL,IAAInE,oBAAJ,EAhGK,CAAP;AAkGD;AACD;AACE,cAAM,IAAImD,KAAJ,CAAW,uBAAsBzC,KAAM,iBAAvC,CAAN;AA3KJ;AA6KD;;AAED,WAAS4C,OAAT,GAAmB;AACjB,UAAM,EAAEnD,OAAF,KAAcX,MAAMsD,QAAN,EAApB;AACA,WAAO;AACL;AACA;AACAoD,kBAAY,CAAE,EAAF,EAAK,GAAG/F,QAAQ+F,UAAhB,CAHP;AAIL;AACA;AACA;AACA;AACAC,0BAAoB,CACjB,cADiB,EAElB1F,cAAe,cAAf,CAFkB,EAGlBA,cAAe,cAAf,EAA+B,QAA/B,EAAyC,cAAzC,CAHkB;AARf,KAAP;AAcD;;AAED,WAAS2F,OAAT,GAAmB;AACjB,YAAQ1F,KAAR;AACE,WAAM,SAAN;AACE,eAAQ,yBAAR;AACF;AACA;AACA,WAAM,cAAN;AACA,WAAM,YAAN;AACA,WAAM,kBAAN;AACE,eAAQ,YAAR;AACF;AACE,eAAO,KAAP;AAVJ;AAYD;;AAED,WAAST,MAAT,CAAgB8C,MAAhB,EAAwB;AACtB;AACAA,WAAOsD,MAAP,CAAe,IAAf,EAAoB;AAClBZ,YAAM,SADY,EACD;AACjBa,eAAS,iCAFS;AAGlBD,cAAS,OAHS;AAIlBE,aAAO5F;AAJW,KAApB;AAMAoC,WAAOsD,MAAP,CAAe,MAAf,EAAsB;AACpBZ,YAAM,SADc;AAEpBe,eAAS,CAAE,MAAF;AAFW,KAAtB;AAIAzD,WAAOsD,MAAP,CAAe,MAAf,EAAsB;AACpBZ,YAAM,SADc;AAEpBe,eAAS,CAAE,MAAF,EAAU,MAAV;AAFW,KAAtB;;AAKA;AACA;AACAzD,WAAOsD,MAAP,CAAe,aAAf,EAA6B;AAC3BZ,YAAM,+CADqB;AAE3BY,cAAS,MAFkB;AAG3BE,aAAO;AACLvB,cAAO;AADF;AAHoB,KAA7B;AAOA;AACA;AACAjC,WAAOsD,MAAP,CAAe,YAAf,EAA4B;AAC1BZ,YAAM,+DADoB;AAE1BY,cAAS,KAFiB;AAG1BE,aAAO;AACLE,eAAO,KADF;AAELzB,cAAO;AAFF;AAHmB,KAA5B;;AASA,YAAQtE,KAAR;AACE,WAAM,SAAN;AACEqC,eAAOsD,MAAP,CAAe,KAAf,EAAqB;AACnBZ,gBAAM,QADa;AAEnBa,mBAAS,gBAFU;AAGnBE,mBAAS,CAAE,OAAF,EAAW,KAAX,EAAkB,SAAlB;AAHU,SAArB;;AAMA;AACAzD,eAAOsD,MAAP,CAAe,YAAf,EAA4B;AAC1BZ,gBAAM,gBADoB;AAE1Be,mBAAS,CAAE,OAAF,EAAU,+CAAiB9F,KAAjB,CAAV,EAAoC,SAApC;AAFiB,SAA5B;;AAKAqC,eAAO2D,KAAP,CAAa;AACXC,kBAAQC,EAAR,EAAY;AACV,mBAAO,CACLnH,QAAS,gBAAT,EAA0B,EAAEoH,iBAAiBD,EAAnB,EAA1B,CADK,EAELnH,QAAS,iBAAT,EAA2B,EAAEqH,UAAU3G,QAAQ4G,YAApB,EAA3B,CAFK,EAGLtH,QAAS,0BAAT,CAHK,EAILA,QAAS,kBAAT,CAJK,CAAP;AAMD;AARU,SAAb;AAUA,eAAOsD,MAAP;;AAEF,WAAM,WAAN;AACEA,eAAOsD,MAAP,CAAe,KAAf,EAAqB;AACnBZ,gBAAM,QADa;AAEnBa,mBAAS,gBAFU;AAGnBD,kBAAQ,mCAAkBW,OAAlB,CAA0B,CAAE,cAAF,EAAkB,SAAlB,CAA1B;AAHW,SAArB;;AAMA;AACAjE,eAAOsD,MAAP,CAAe,YAAf,EAA4B;AAC1BZ,gBAAM,gBADoB;AAE1BY,kBAAQ,mCAAkBW,OAAlB,CAA2B,OAA3B,EAAmC,CACzC,+CAAiBtG,KAAjB,CADyC,EAExC,SAFwC,CAAnC;AAFkB,SAA5B;AAOAqC,eAAO2D,KAAP,CAAa;AACXC,mBAAS,CACPlH,QAAS,gBAAT,GADO,EAEPA,QAAS,iBAAT,EAA2B;AACzBqH,sBAAU3G,QAAQ4G;AADO,WAA3B,CAFO;AADE,SAAb;AAQA,eAAOhE,MAAP;;AAEF,WAAM,YAAN;AACA,WAAM,cAAN;AACE;AACA;AACA;;AAEAA,eAAOsD,MAAP,CAAe,KAAf,EAAqB;AACnBZ,gBAAM,QADa;AAEnBa,mBAAS,gBAFU;AAGnBD,kBAAS;AAHU,SAArB;;AAMA;AACAtD,eAAOsD,MAAP,CAAe,YAAf,EAA4B;AAC1BZ,gBAAM,gBADoB;AAE1BY,kBAAQ,mCAAkBW,OAAlB,CAA2B,OAA3B,EAAmC,CACzC,+CAAiBtG,KAAjB,CADyC,EAExC,SAFwC,CAAnC;AAFkB,SAA5B;;AAQA,eAAOqC,MAAP;;AAEF,WAAM,kBAAN;AACE;AACA;AACA;AACA;AACA;AACA;;AAEAA,eAAOsD,MAAP,CAAe,KAAf,EAAqB;AACnBZ,gBAAM,QADa;AAEnBa,mBAAS,gBAFU;AAGnB;AACAD,kBAAQ,mCAAkBW,OAAlB,CAA0B,CAAE,KAAF,CAA1B;AAJW,SAArB;;AAOA;AACAjE,eAAOsD,MAAP,CAAe,YAAf,EAA4B;AAC1BZ,gBAAM,gBADoB;AAE1BY,kBAAQ,mCAAkBW,OAAlB,CAA2B,OAA3B,EAAmC,CACzC,+CAAiBtG,KAAjB,CADyC,EAExC,SAFwC,CAAnC;AAFkB,SAA5B;;AAQA,eAAOqC,MAAP;;AAEF;AACE,eAAOA,MAAP;AArGJ;AAuGD;;AAED,WAASkE,aAAT,GAAyB;AACvB,UAAMC,OAAO,CAAC,eAAK5D,OAAL,CAAalD,SAAb,EAAyB,cAAzB,CAAD,CAAb;;AAEA,UAAM+G,0BAA0B,eAAK7D,OAAL,CAAalD,SAAb,EAAyB,SAAzB,CAAhC;;AAEA,QAAI;AACF,UAAI,aAAGgH,QAAH,CAAYD,uBAAZ,EAAqCE,WAArC,EAAJ,EAAwD;AACtDH,aAAKI,IAAL,CAAUH,uBAAV;AACD;AACF,KAJD,CAIE,OAAO3F,CAAP,EAAU;AACV,UAAIA,KAAKA,EAAEC,IAAF,KAAY,QAArB,EAA8B;AAC5BC,gBAAQC,GAAR,CAAYH,CAAZ;AACD;AACF;;AAED,WAAO;AACL0F,UADK;AAELf,0BAAoB,CAAC,eAAKjF,IAAL,CAAUqG,SAAV,EAAsB,YAAtB,CAAD,EAAsC,cAAtC;AAFf,KAAP;AAID;;AAED,QAAMxE,SAAS,mCAAf;;AAEAA,SAAO2D,KAAP,CAAa;AACX;AACAc,aAASpH,SAFE;AAGXqH,UAAM;AACJC,kBAAY;AADR,KAHK;AAMXtE,WAAOA,OANI;AAOX1D,WAAO,IAPI;AAQX;AACA;AACA;AACA;AACAiI,YAAQjH,UAAW,YAAX,IAA0BA,UAAW,cAArC,GAAsD,MAAtD,GAA+D,KAZ5D;AAaXkH,aAASlH,UAAW,YAbT;AAcX0F,aAASA,SAdE;AAeX5D,YAAQA,QAfG;AAgBXyE,mBAAeA,eAhBJ;AAiBXxD,aAASA,SAjBE;AAkBXH,aAASA;AAlBE,GAAb;;AAqBArD,SAAO8C,MAAP,EAAerC,KAAf;;AAEA;AACA;AACA,QAAMmH,kBAAkB,MAAM,qCAAsB9E,MAAtB,EAA8B1C,aAA9B,CAA9B;;AAEA,SAAOwH,eAAP;AACD,CAhhBD","file":"webpack.config.js","sourcesContent":["import { uniq, some } from \"lodash\"\nimport fs from \"fs\"\nimport path from \"path\"\nimport webpack from \"webpack\"\nimport dotenv from \"dotenv\"\nimport Config from \"webpack-configurator\"\nimport ExtractTextPlugin from \"extract-text-webpack-plugin\"\nimport StaticSiteGeneratorPlugin from \"static-site-generator-webpack-plugin\"\nimport { StatsWriterPlugin } from \"webpack-stats-plugin\"\nimport FriendlyErrorsWebpackPlugin from \"friendly-errors-webpack-plugin\"\nimport { cssModulesConfig } from \"gatsby-1-config-css-modules\"\n\n// This isn't working right it seems.\n// import WebpackStableModuleIdAndHash from 'webpack-stable-module-id-and-hash'\nimport webpackModifyValidate from \"./webpack-modify-validate\"\n\nconst { store } = require(`../redux`)\nconst debug = require(`debug`)(`gatsby:webpack-config`)\nconst WebpackMD5Hash = require(`webpack-md5-hash`)\nconst ChunkManifestPlugin = require(`chunk-manifest-webpack-plugin`)\nconst GatsbyModulePlugin = require(`gatsby-module-loader/plugin`)\nconst genBabelConfig = require(`./babel-config`)\nconst { withBasePath } = require(`./path`)\nconst HashedChunkIdsPlugin = require(`./hashed-chunk-ids-plugin`)\n\n// Five stages or modes:\n//   1) develop: for `gatsby develop` command, hot reload and CSS injection into page\n//   2) develop-html: same as develop without react-hmre in the babel config for html renderer\n//   3) build-css: build styles.css file\n//   4) build-html: build all HTML files\n//   5) build-javascript: Build js chunks for Single Page App in production\n\nmodule.exports = async (\n  program,\n  directory,\n  suppliedStage,\n  webpackPort = 1500,\n  pages = []\n) => {\n  const babelStage = suppliedStage\n  const directoryPath = withBasePath(directory)\n\n  // We combine develop & develop-html stages for purposes of generating the\n  // webpack config.\n  const stage = suppliedStage\n  const babelConfig = await genBabelConfig(program, babelStage)\n\n  function processEnv(stage, defaultNodeEnv) {\n    debug(`Building env for \"${stage}\"`)\n    const env = process.env.NODE_ENV\n      ? process.env.NODE_ENV\n      : `${defaultNodeEnv}`\n    const envFile = path.join(process.cwd(), `./.env.${env}`)\n    let parsed = {}\n    try {\n      parsed = dotenv.parse(fs.readFileSync(envFile, { encoding: `utf8` }))\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n    const envObject = Object.keys(parsed).reduce((acc, key) => {\n      acc[key] = JSON.stringify(parsed[key])\n      return acc\n    }, {})\n\n    const gatsbyVarObject = Object.keys(process.env).reduce((acc, key) => {\n      if (key.match(/^GATSBY_/)) {\n        acc[key] = JSON.stringify(process.env[key])\n      }\n      return acc\n    }, {})\n\n    // Don't allow overwriting of NODE_ENV, PUBLIC_DIR as to not break gatsby things\n    envObject.NODE_ENV = JSON.stringify(env)\n    envObject.PUBLIC_DIR = JSON.stringify(`${process.cwd()}/public`)\n\n    return Object.assign(envObject, gatsbyVarObject)\n  }\n\n  debug(`Loading webpack config for stage \"${stage}\"`)\n  function output() {\n    switch (stage) {\n      case `develop`:\n        return {\n          path: directory,\n          filename: `[name].js`,\n          publicPath: `http://${program.host}:${webpackPort}/`,\n        }\n      case `build-css`:\n        // Webpack will always generate a resultant javascript file.\n        // But we don't want it for this step. Deleted by build-css.js.\n        return {\n          path: directoryPath(`public`),\n          filename: `bundle-for-css.js`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-html`:\n      case `develop-html`:\n        // A temp file required by static-site-generator-plugin. See plugins() below.\n        // Deleted by build-html.js, since it's not needed for production.\n        return {\n          path: directoryPath(`public`),\n          filename: `render-page.js`,\n          libraryTarget: `umd`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-javascript`:\n        return {\n          filename: `[name]-[chunkhash].js`,\n          chunkFilename: `[name]-[chunkhash].js`,\n          path: directoryPath(`public`),\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function entry() {\n    switch (stage) {\n      case `develop`:\n        return {\n          commons: [\n            require.resolve(`react-hot-loader/patch`),\n            `${require.resolve(\n              `webpack-hot-middleware/client`\n            )}?path=http://${program.host}:${webpackPort}/__webpack_hmr&reload=true`,\n            directoryPath(`.cache/app`),\n          ],\n        }\n      case `develop-html`:\n        return {\n          main: directoryPath(`.cache/develop-static-entry`),\n        }\n      case `build-css`:\n        return {\n          main: directoryPath(`.cache/app`),\n        }\n      case `build-html`:\n        return {\n          main: directoryPath(`.cache/static-entry`),\n        }\n      case `build-javascript`:\n        return {\n          app: directoryPath(`.cache/production-app`),\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function plugins() {\n    switch (stage) {\n      case `develop`:\n        return [\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new webpack.HotModuleReplacementPlugin(),\n          new webpack.NoErrorsPlugin(),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Names module ids with their filepath. We use this in development\n          // to make it easier to see what modules have hot reloaded, etc. as\n          // the numerical IDs aren't useful. In production we use numerical module\n          // ids to reduce filesize.\n          new webpack.NamedModulesPlugin(),\n          new FriendlyErrorsWebpackPlugin({\n            clearConsole: false,\n            compilationSuccessInfo: {\n              messages: [\n                `Your site is running at http://localhost:${program.port}`,\n                `Your graphql debugger is running at http://localhost:${program.port}/___graphql`,\n              ],\n            },\n          }),\n        ]\n      case `develop-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          new ExtractTextPlugin(`build-html-styles.css`),\n        ]\n      case `build-css`:\n        return [\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          new ExtractTextPlugin(`styles.css`, { allChunks: true }),\n        ]\n      case `build-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          new ExtractTextPlugin(`build-html-styles.css`, { allChunks: true }),\n        ]\n      case `build-javascript`: {\n        // Get array of page template component names.\n        let components = store\n          .getState()\n          .pages.map(page => page.componentChunkName)\n        components = uniq(components)\n        return [\n          // Moment.js includes 100s of KBs of extra localization data by\n          // default in Webpack that most sites don't want. This line disables\n          // loading locale modules. This is a practical solution that requires\n          // the user to opt into importing specific locales.\n          // https://github.com/jmblog/how-to-optimize-momentjs-with-webpack\n          new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/),\n          new WebpackMD5Hash(),\n          // new webpack.optimize.DedupePlugin(),\n          // Extract \"commons\" chunk from the app entry and all\n          // page components.\n          new webpack.optimize.CommonsChunkPlugin({\n            name: `commons`,\n            chunks: [`app`, ...components],\n            // The more page components there are, the higher we raise the bar\n            // for merging in page-specific JS libs into the commons chunk. The\n            // two principles here is a) keep the TTI (time to interaction) as\n            // low as possible so that means keeping commons.js small with\n            // critical framework code (e.g. React/react-router) and b) is we\n            // want to push JS parse/eval work as close as possible to when\n            // it's used. Since most people don't navigate to most pages, take\n            // tradeoff of loading/evaling modules multiple times over\n            // loading/evaling lots of unused code on the initial opening of\n            // the app.\n            minChunks: (module, count) => {\n              const vendorModuleList = [\n                `react`,\n                `react-dom`,\n                `fbjs`,\n                `react-router`,\n                `react-router-dom`,\n                `gatsby-react-router-scroll`,\n                `dom-helpers`, // Used in gatsby-react-router-scroll\n                `path-to-regexp`,\n                `isarray`, // Used by path-to-regexp.\n                `scroll-behavior`,\n                `history`,\n                `resolve-pathname`, // Used by history.\n                `value-equal`, // Used by history.\n                `invariant`, // Used by history.\n                `warning`, // Used by history.\n                `babel-runtime`, // Used by history.\n                `core-js`, // Used by history.\n                `loose-envify`, // Used by history.\n                `prop-types`,\n                `gatsby-link`,\n              ]\n              const isFramework = some(\n                vendorModuleList.map(vendor => {\n                  const regex = new RegExp(`\\/node_modules\\/${vendor}\\/.*`, `i`)\n                  return regex.test(module.resource)\n                })\n              )\n              return isFramework || count > 3\n            },\n          }),\n          // Add a few global variables. Set NODE_ENV to production (enables\n          // optimizations for React) and whether prefixing links is enabled\n          // (__PREFIX_PATHS__) and what the link prefix is (__PATH_PREFIX__).\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Extract CSS so it doesn't get added to JS bundles.\n          new ExtractTextPlugin(`build-js-styles.css`, { allChunks: true }),\n          // Write out mapping between chunk names and their hashed names. We use\n          // this to add the needed javascript files to each HTML page.\n          new StatsWriterPlugin(),\n          // Extract the webpack chunk manifest out of commons.js so commons.js\n          // doesn't get changed everytime you build. This increases the cache-hit\n          // rate for commons.js.\n          new ChunkManifestPlugin({\n            filename: `chunk-manifest.json`,\n            manifestVariable: `webpackManifest`,\n          }),\n          // Minify Javascript.\n          new webpack.optimize.UglifyJsPlugin({\n            compress: {\n              screw_ie8: true, // React doesn't support IE8\n              warnings: false,\n            },\n            mangle: {\n              screw_ie8: true,\n            },\n            output: {\n              comments: false,\n              screw_ie8: true,\n            },\n          }),\n          // Ensure module order stays the same. Supposibly fixed in webpack 2.0.\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new GatsbyModulePlugin(),\n          // new WebpackStableModuleIdAndHash({ seed: 9, hashSize: 47 }),\n          new webpack.NamedModulesPlugin(),\n          new HashedChunkIdsPlugin(),\n        ]\n      }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function resolve() {\n    const { program } = store.getState()\n    return {\n      // Use the program's extension list (generated via the\n      // 'resolvableExtensions' API hook).\n      extensions: [``, ...program.extensions],\n      // Default to using the site's node_modules directory to look for\n      // modules. But also make it possible to install modules within the src\n      // directory if you need to install a specific version of a module for a\n      // part of your site.\n      modulesDirectories: [\n        `node_modules`,\n        directoryPath(`node_modules`),\n        directoryPath(`node_modules`, `gatsby`, `node_modules`),\n      ],\n    }\n  }\n\n  function devtool() {\n    switch (stage) {\n      case `develop`:\n        return `cheap-module-source-map`\n      // use a normal `source-map` for the html phases since\n      // it gives better line and column numbers\n      case `develop-html`:\n      case `build-html`:\n      case `build-javascript`:\n        return `source-map`\n      default:\n        return false\n    }\n  }\n\n  function module(config) {\n    // Common config for every env.\n    config.loader(`js`, {\n      test: /\\.jsx?$/, // Accept either .js or .jsx files.\n      exclude: /(node_modules|bower_components)/,\n      loader: `babel`,\n      query: babelConfig,\n    })\n    config.loader(`json`, {\n      test: /\\.json$/,\n      loaders: [`json`],\n    })\n    config.loader(`yaml`, {\n      test: /\\.ya?ml/,\n      loaders: [`json`, `yaml`],\n    })\n\n    // \"file\" loader makes sure those assets end up in the `public` folder.\n    // When you `import` an asset, you get its filename.\n    config.loader(`file-loader`, {\n      test: /\\.(ico|eot|otf|webp|pdf|ttf|woff(2)?)(\\?.*)?$/,\n      loader: `file`,\n      query: {\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n    // \"url\" loader works just like \"file\" loader but it also embeds\n    // assets smaller than specified size as data URLs to avoid requests.\n    config.loader(`url-loader`, {\n      test: /\\.(svg|jpg|jpeg|png|gif|mp4|webm|wav|mp3|m4a|aac|oga)(\\?.*)?$/,\n      loader: `url`,\n      query: {\n        limit: 10000,\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n\n    switch (stage) {\n      case `develop`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loaders: [`style`, `css`, `postcss`],\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loaders: [`style`, cssModulesConfig(stage), `postcss`],\n        })\n\n        config.merge({\n          postcss(wp) {\n            return [\n              require(`postcss-import`)({ addDependencyTo: wp }),\n              require(`postcss-cssnext`)({ browsers: program.browserslist }),\n              require(`postcss-browser-reporter`),\n              require(`postcss-reporter`),\n            ]\n          },\n        })\n        return config\n\n      case `build-css`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract([`css?minimize`, `postcss`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n        config.merge({\n          postcss: [\n            require(`postcss-import`)(),\n            require(`postcss-cssnext`)({\n              browsers: program.browserslist,\n            }),\n          ],\n        })\n        return config\n\n      case `build-html`:\n      case `develop-html`:\n        // We don't deal with CSS at all when building the HTML.\n        // The 'null' loader is used to prevent 'module not found' errors.\n        // On the other hand CSS modules loaders are necessary.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loader: `null`,\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n\n        return config\n\n      case `build-javascript`:\n        // we don't deal with css at all when building the javascript.  but\n        // still need to process the css so offline-plugin knows about the\n        // various assets referenced in your css.\n        //\n        // It's also necessary to process CSS Modules so your JS knows the\n        // classNames to use.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          // loader: `null`,\n          loader: ExtractTextPlugin.extract([`css`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n\n        return config\n\n      default:\n        return config\n    }\n  }\n\n  function resolveLoader() {\n    const root = [path.resolve(directory, `node_modules`)]\n\n    const userLoaderDirectoryPath = path.resolve(directory, `loaders`)\n\n    try {\n      if (fs.statSync(userLoaderDirectoryPath).isDirectory()) {\n        root.push(userLoaderDirectoryPath)\n      }\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n\n    return {\n      root,\n      modulesDirectories: [path.join(__dirname, `../loaders`), `node_modules`],\n    }\n  }\n\n  const config = new Config()\n\n  config.merge({\n    // Context is the base directory for resolving the entry option.\n    context: directory,\n    node: {\n      __filename: true,\n    },\n    entry: entry(),\n    debug: true,\n    // Certain \"isomorphic\" packages have different entry points for browser\n    // and server (see\n    // https://github.com/defunctzombie/package-browser-field-spec); setting\n    // the target tells webpack which file to include, ie. browser vs main.\n    target: stage === `build-html` || stage === `develop-html` ? `node` : `web`,\n    profile: stage === `production`,\n    devtool: devtool(),\n    output: output(),\n    resolveLoader: resolveLoader(),\n    plugins: plugins(),\n    resolve: resolve(),\n  })\n\n  module(config, stage)\n\n  // Use the suppliedStage again to let plugins distinguish between\n  // server rendering the html.js and the frontend development config.\n  const validatedConfig = await webpackModifyValidate(config, suppliedStage)\n\n  return validatedConfig\n}\n"]}