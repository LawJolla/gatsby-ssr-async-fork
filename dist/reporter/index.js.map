{"version":3,"sources":["../../src/reporter/index.js"],"names":["require","createReporter","stripIndent","convertHrtime","getErrorFormatter","errorFormatter","reporter","emoji","base","Object","getPrototypeOf","module","exports","assign","setVerbose","isVerbose","panic","error","process","exit","message","arguments","length","call","console","log","render","uptime","prefix","verbose","toFixed","activityTimer","name","spinner","activity","start","hrtime","elapsedTime","elapsed","tick","end","success"],"mappings":";;eAE2BA,QAAS,WAAT,C;IAAnBC,c,YAAAA,c;;gBACgBD,QAAS,aAAT,C;IAAhBE,W,aAAAA,W;;AACR,IAAMC,gBAAgBH,QAAS,gBAAT,CAAtB;;gBAC8BA,QAAS,UAAT,C;IAAtBI,iB,aAAAA,iB;;AAER,IAAMC,iBAAiBD,mBAAvB;AACA,IAAME,WAAWL,eAAe,EAAEM,OAAO,IAAT,EAAf,CAAjB;AACA,IAAMC,OAAOC,OAAOC,cAAP,CAAsBJ,QAAtB,CAAb;;AAEAK,OAAOC,OAAP,GAAiBH,OAAOI,MAAP,CAAcP,QAAd,EAAwB;AACvCJ,aADuC;;AAGvCY,aAAWC,SAAX,EAAsB;AACpB,SAAKA,SAAL,GAAiB,IAAjB;AACD,GALsC;;AAOvCC,UAAe;AACb,SAAKC,KAAL;AACAC,YAAQC,IAAR,CAAa,CAAb;AACD,GAVsC;;AAYvCF,QAAMG,OAAN,EAAeH,KAAf,EAAsB;AACpB,QAAII,UAAUC,MAAV,KAAqB,CAArB,IAA0B,OAAOF,OAAP,KAAoB,QAAlD,EAA2D;AACzDH,cAAQG,OAAR;AACAA,gBAAUH,MAAMG,OAAhB;AACD;AACDZ,SAAKS,KAAL,CAAWM,IAAX,CAAgB,IAAhB,EAAsBH,OAAtB;AACA,QAAIH,KAAJ,EAAWO,QAAQC,GAAR,CAAYpB,eAAeqB,MAAf,CAAsBT,KAAtB,CAAZ;AACZ,GAnBsC;;AAqBvCU,SAAOC,MAAP,EAAuB;AACrB,SAAKC,OAAL,CAAc,GAAED,MAAO,KAAI,CAACV,QAAQS,MAAR,KAAmB,IAApB,EAA0BG,OAA1B,CAAkC,CAAlC,CAAqC,IAAhE;AACD,GAvBsC;;AAyBvCC,gBAAcC,IAAd,EAAoB;AAClB,QAAMC,UAAU3B,SAAS4B,QAAT,EAAhB;AACA,QAAMC,QAAQjB,QAAQkB,MAAR,EAAd;;AAEA,QAAMC,cAAc,SAAdA,WAAc,GAAM;AACxB,UAAIC,UAAUpB,QAAQkB,MAAR,CAAeD,KAAf,CAAd;AACA,aAAQ,GAAEhC,cAAcmC,OAAd,EAAwB,SAAxB,EAAkCR,OAAlC,CAA0C,CAA1C,CAA6C,IAAvD;AACD,KAHD;;AAKA,WAAO;AACLK,aAAO,iBAAM;AACXF,gBAAQM,IAAR,CAAaP,IAAb;AACD,OAHI;AAILQ,WAAK,eAAM;AACTlC,iBAASmC,OAAT,CAAkB,GAAET,IAAK,MAAKK,aAAc,EAA5C;AACAJ,gBAAQO,GAAR;AACD;AAPI,KAAP;AASD;AA3CsC,CAAxB,CAAjB","file":"index.js","sourcesContent":["// @flow\n\nconst { createReporter } = require(`yurnalist`)\nconst { stripIndent } = require(`common-tags`)\nconst convertHrtime = require(`convert-hrtime`)\nconst { getErrorFormatter } = require(`./errors`)\n\nconst errorFormatter = getErrorFormatter()\nconst reporter = createReporter({ emoji: true })\nconst base = Object.getPrototypeOf(reporter)\n\nmodule.exports = Object.assign(reporter, {\n  stripIndent,\n\n  setVerbose(isVerbose) {\n    this.isVerbose = true\n  },\n\n  panic(...args) {\n    this.error(...args)\n    process.exit(1)\n  },\n\n  error(message, error) {\n    if (arguments.length === 1 && typeof message !== `string`) {\n      error = message\n      message = error.message\n    }\n    base.error.call(this, message)\n    if (error) console.log(errorFormatter.render(error))\n  },\n\n  uptime(prefix: string) {\n    this.verbose(`${prefix}: ${(process.uptime() * 1000).toFixed(3)}ms`)\n  },\n\n  activityTimer(name) {\n    const spinner = reporter.activity()\n    const start = process.hrtime()\n\n    const elapsedTime = () => {\n      var elapsed = process.hrtime(start)\n      return `${convertHrtime(elapsed)[`seconds`].toFixed(3)} s`\n    }\n\n    return {\n      start: () => {\n        spinner.tick(name)\n      },\n      end: () => {\n        reporter.success(`${name} â€” ${elapsedTime()}`)\n        spinner.end()\n      },\n    }\n  },\n})\n"]}